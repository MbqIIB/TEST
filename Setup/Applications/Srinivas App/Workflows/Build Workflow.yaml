harnessApiVersion: '1.0'
type: BUILD
notificationRules:
  - conditions:
      - FAILED
    executionScope: WORKFLOW
    notificationGroups:
      - Account Administrator
phases:
  - daemonSet: false
    name: Phase 1
    phaseSteps:
      - type: PREPARE_STEPS
        name: Prepare Steps
        stepsInParallel: false
      - type: COLLECT_ARTIFACT
        name: Collect Artifact
        steps:
          - type: JENKINS
            name: Jenkins
            properties:
                jobName: build-description-setter
                jenkinsConfigId: X9GzhkXEQJi4p4UkpqoBRA
                timeoutMillis: 600000
                jobParameters: null
          - type: ARTIFACT_COLLECTION
            name: Artifact Collection
            properties:
                serviceName: toli-docker-service
                buildNo: '${regex.replace(''tag: ([\w-]+)'', ''$1'', ${Jenkins.description})}'
                artifactStreamName: toli_some-artifactt
        stepsInParallel: false
      - type: WRAP_UP
        name: Wrap Up
        stepsInParallel: false
    provisionNodes: false
templatized: true
userVariables:
  - type: TEXT
    fixed: false
    mandatory: false
    name: param1
  - type: TEXT
    fixed: false
    mandatory: false
    name: sourceBranch
  - type: TEXT
    fixed: false
    mandatory: false
    name: sourceRepositoryOwner
