harnessApiVersion: '1.0'
type: ECS
advancedConfig: |-
    # Enter your Task Definition JSON spec below.
    #
    # Placeholders:
    #
    # Required: ${DOCKER_IMAGE_NAME}
    #   - Replaced with the Docker image name and tag
    #
    # Optional: ${CONTAINER_NAME}
    #   - Replaced with a container name based on the image name
    #
    # Required For Fargate: ${EXECUTION_ROLE}
    #   - Replaced with execution role arn
    #
    # Harness will set the task family of the task definition.
    #
    # Service variables will be merged into environment
    # variables for all containers, overriding values if
    # the name is the same.
    #
    # ---
    {
        "containerDefinitions" : [ {
            "name" : "${CONTAINER_NAME}",
            "image" : "${DOCKER_IMAGE_NAME}",
            "cpu" : 1,
            "memory" : 512,
            "links" : [ ],
            "portMappings" : [ {
                "containerPort" : 8080,
                "protocol" : "tcp"
            }, {
                "containerPort" : 3348,
                "protocol" : "tcp"
            } ],
            "entryPoint" : [ ],
            "command" : [ ],
            "environment" : [ ],
            "mountPoints" : [ ],
            "volumesFrom" : [ ],
            "dnsServers" : [ ],
            "dnsSearchDomains" : [ ],
            "extraHosts" : [ ],
            "dockerSecurityOptions" : [ ],
            "ulimits" : [ ]
        },
        {
            "name" : "nginx",
            "image" : "nginx",
            "cpu" : 1,
            "memory" : 3096,
            "links" : [ ],
            "portMappings" : [ {
                "containerPort" : 80,
                "protocol" : "tcp"
            }, {
                "containerPort" : 9087,
                "protocol" : "tcp"
            } ],
            "entryPoint" : [ ],
            "command" : [ ],
            "environment" : [ ],
            "mountPoints" : [ ],
            "volumesFrom" : [ ],
            "dnsServers" : [ ],
            "dnsSearchDomains" : [ ],
            "extraHosts" : [ ],
            "dockerSecurityOptions" : [ ],
            "ulimits" : [ ]
        } ],
        "executionRoleArn" : "${EXECUTION_ROLE}",
        "volumes" : [ ],
        "requiresAttributes" : [ ],
        "placementConstraints" : [ ],
        "compatibilities" : [ ],
        "requiresCompatibilities" : [ ],
        "cpu" : "1",
        "memory" : "512"
    }
